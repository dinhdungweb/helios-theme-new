{%- assign current_article_title = article.title | downcase | split: " " -%}
{%- assign max_related_articles = 5 -%}
{%- assign related_articles_count = 0 -%}

<div id="relatedblogs">
  <h3 class="blog-title">Bài Viết Liên Quan:</h3>
<ol>
  {%- for other_article in blog.articles -%}
    {%- if other_article.id != article.id -%}
      {%- assign other_article_title = other_article.title | downcase | split: " " -%}
      {%- assign match_found = false -%}
      {%- for word in current_article_title -%}
        {%- if other_article_title contains word -%}
          {%- assign match_found = true -%}
          {%- break -%}
        {%- endif -%}
      {%- endfor -%}
      
      {%- if match_found and related_articles_count < max_related_articles -%}
        <li>
          <div class="rb_image_wrap">
        <a href="{{ other_article.url }}"><img src="{{ other_article.image.src | img_url: '' }}" alt="{{ other_article.title }}" class="rb_image" /></a>
          </div>
          <h5 class="rb_title"><a href="{{ other_article.url }}">{{ other_article.title }}</a></h5>
        </li>
        {%- assign related_articles_count = related_articles_count | plus: 1 -%}
      {%- endif -%}
    {%- endif -%}
    {%- if related_articles_count >= max_related_articles -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}
</ol>
</div>
{%- if related_articles_count == 0 -%}
<p>Không có bài viết liên quan.</p>
{%- endif -%}
<style type="text/css">
      .rb_contents {
        line-height: 1.2;
      }
      .rb_no_image {
        height: 100%;
        width: 100%;
        background-color: rgb(128, 128, 128);
        display: inline-block
      }

     /* img.rb_image {
        max-height: 75px;
        max-width: 100px;
        height: auto;
        width: auto
      }*/

      /*.rb_image_wrap {
        float: left;
        width: 105px
      }*/

      #relatedblogs li {
        display: grid;
        grid-template-columns: 25% 71%;
        column-gap: 10px;
        list-style-type: none;
        font-size: 1rem;
        margin-bottom: 5px;
        padding-bottom: 5px;
      }
      #relatedblogs li:not(:last-child) {
        border-bottom: 1px dotted #ddd;
      }
      #relatedblogs h5{
        margin: 3px 0;
      }
      #relatedblogs a {
        text-decoration: none;
        border: unset;
      }
      #relatedblogs > .blog-title, #relatedblogs h5 {
        text-align: left;
      }
 
      #relatedblogs img.rb_image {
        object-fit: cover;
        border-radius: 6px;
        box-shadow: 0px 0px 5px #80808052;
        max-width: -webkit-fill-available;
        width: 100%;
        height: auto;
        aspect-ratio: 4/3;
      }
      #relatedblogs li::before {
          opacity: 1;
      }
      #relatedblogs .article__content.rte {
          font-size: inherit;
      }
      div#relatedblogs {
        position: sticky;
        top: 80px;
        margin-bottom: 20px;
}
  #relatedblogs ol {
    /* background-color: #F2F2F2; */
    padding: 10px 0px;
  }
  #relatedblogs h5 a {
    font-size: 1rem;
    font-weight: 600;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
}
  @media screen and (max-width: 768px)
  {
    #relatedblogs h5 a {
          font-size: 13px;
      }
  }
          </style>